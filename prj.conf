# SPDX-License-Identifier: MIT
# Debugprobe Zephyr Port - Project Configuration

# General
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_HEAP_MEM_POOL_SIZE=8192

# Enable GPIO
CONFIG_GPIO=y

# Enable UART
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_UART_LINE_CTRL=y

# Enable new USB device stack
CONFIG_USB_DEVICE_STACK_NEXT=y
CONFIG_USBD_CDC_ACM_CLASS=y
CONFIG_CDC_ACM_SERIAL_INITIALIZE_AT_BOOT=n

# USB device descriptors (configured via USBD_DEVICE_DEFINE)
# VID/PID set in code: 0x2E8A/0x000C

# Logging for USB
CONFIG_USBD_LOG_LEVEL_WRN=y
CONFIG_UDC_DRIVER_LOG_LEVEL_WRN=y

# Thread support
CONFIG_MULTITHREADING=y
CONFIG_NUM_PREEMPT_PRIORITIES=16

# Timing
CONFIG_SYS_CLOCK_TICKS_PER_SEC=1000

# Debug/logging
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=2
CONFIG_LOG_BACKEND_UART=y

# Ring buffer for USB data
CONFIG_RING_BUFFER=y

# Net buffer for USB device stack
CONFIG_NET_BUF=y

# Flash for storing serial number
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y

# Enable PIO (RP2040 specific)
CONFIG_PIO_RPI_PICO=y

# Debugprobe specific
CONFIG_DEBUGPROBE=y
CONFIG_DEBUGPROBE_CDC_UART=y
CONFIG_DEBUGPROBE_DAP=y
CONFIG_DEBUGPROBE_TX_LED=y
CONFIG_DEBUGPROBE_RX_LED=y
CONFIG_DEBUGPROBE_DAP_LED=y

# Optimize for size
CONFIG_SIZE_OPTIMIZATIONS=y
